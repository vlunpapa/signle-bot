# ç­–ç•¥YAML Schemaç¤ºä¾‹
# æ”¯æŒKçº¿æ¨¡å¼å’Œé“¾ä¸Šæ¨¡å¼çš„åŒå­—æ®µæ˜ å°„

strategies:
  # ç¤ºä¾‹1: Kçº¿æ¨¡å¼ç­–ç•¥ - é‡å¢ä»·å‡
  - name: "é‡å¢ä»·å‡"
    description: "æˆäº¤é‡å¢åŠ ä¸”ä»·æ ¼ä¸Šæ¶¨"
    mode: "kline"  # æˆ– "onchain" æˆ– "both"
    enabled: true
    
    # æ¡ä»¶è¡¨è¾¾å¼ï¼ˆæ”¯æŒå¤šæ¡ä»¶AND/ORï¼‰
    conditions:
      - field: "volume"
        operator: ">"
        value: "{{ volume_mult }} * avg_volume_24h"  # æ”¯æŒå˜é‡å¼•ç”¨
        description: "æˆäº¤é‡å¤§äº24å°æ—¶å¹³å‡å€¼çš„Nå€"
      
      - field: "close"
        operator: ">"
        value: "open"
        description: "æ”¶ç›˜ä»·é«˜äºå¼€ç›˜ä»·"
      
      - field: "volume_change"
        operator: ">"
        value: 0.2
        description: "æˆäº¤é‡å¢é•¿è¶…è¿‡20%"
    
    # å­—æ®µæ˜ å°„ï¼ˆKçº¿æ¨¡å¼ï¼‰
    kline_fields:
      volume: "volume"
      price: "close"
      volume_change: "(volume - prev_volume) / prev_volume"
      avg_volume_24h: "avg(volume, 24h)"
    
    # å­—æ®µæ˜ å°„ï¼ˆé“¾ä¸Šæ¨¡å¼ï¼‰
    onchain_fields:
      volume: "total_volume"
      price: "price"
      volume_change: "(total_volume - prev_total_volume) / prev_total_volume"
      avg_volume_24h: "avg(total_volume, 24h)"
    
    # ä¿¡å·å¼ºåº¦ï¼ˆ0-100ï¼‰
    signal_strength:
      formula: "min(100, (volume_change * 50) + (price_change * 30))"
    
    # æ¶ˆæ¯æ¨¡æ¿ï¼ˆJinja2ï¼‰
    message_template: |
      ğŸ”” **é‡å¢ä»·å‡ä¿¡å·**
      
      Token: {{ symbol }}
      ä»·æ ¼: ${{ price | round(8) }}
      æ¶¨å¹…: {{ price_change_pct | round(2) }}%
      æˆäº¤é‡: {{ volume | format_number }}
      æˆäº¤é‡å˜åŒ–: {{ volume_change_pct | round(2) }}%
      
      ä¿¡å·å¼ºåº¦: {{ signal_strength }}/100

  # ç¤ºä¾‹2: é“¾ä¸Šæ¨¡å¼ç­–ç•¥ - å¤§æˆ·ä¹°å…¥
  - name: "å¤§æˆ·ä¹°å…¥"
    description: "æ£€æµ‹åˆ°å¤§æˆ·åœ°å€å¤§é‡ä¹°å…¥"
    mode: "onchain"
    enabled: true
    
    conditions:
      - field: "whale_buy_volume"
        operator: ">"
        value: "10000 * price"  # ä¹°å…¥é‡‘é¢è¶…è¿‡10000 USDT
      
      - field: "unique_buyers"
        operator: ">"
        value: 50
        description: "ç‹¬ç«‹ä¹°å®¶æ•°é‡è¶…è¿‡50"
      
      - field: "wash_trading_flag"
        operator: "=="
        value: false
        description: "éåˆ·é‡äº¤æ˜“"
    
    onchain_fields:
      whale_buy_volume: "sum(buy_volume where address in whale_addresses)"
      unique_buyers: "unique_buyers"
      wash_trading_flag: "wash_trading_flag"
    
    message_template: |
      ğŸ‹ **å¤§æˆ·ä¹°å…¥ä¿¡å·**
      
      Token: {{ token_address }}
      ä»·æ ¼: ${{ price | round(8) }}
      å¤§æˆ·ä¹°å…¥é‡: {{ whale_buy_volume | format_number }}
      ç‹¬ç«‹ä¹°å®¶: {{ unique_buyers }}
      
      ğŸ”— [æŸ¥çœ‹é“¾ä¸Šæ•°æ®](https://solscan.io/token/{{ token_address }})

  # ç¤ºä¾‹3: åŒæ¨¡å¼ç­–ç•¥ - å¤©é‡è§é¡¶
  - name: "å¤©é‡è§é¡¶"
    description: "æˆäº¤é‡å¼‚å¸¸æ”¾å¤§ä½†ä»·æ ¼ä¸‹è·Œï¼Œå¯èƒ½è§é¡¶"
    mode: "both"
    enabled: true
    
    conditions:
      - field: "volume"
        operator: ">"
        value: "3 * avg_volume_24h"
        description: "æˆäº¤é‡è¶…è¿‡24å°æ—¶å¹³å‡å€¼çš„3å€"
      
      - field: "price_change"
        operator: "<"
        value: -0.05
        description: "ä»·æ ¼ä¸‹è·Œè¶…è¿‡5%"
      
      - field: "sell_volume_ratio"
        operator: ">"
        value: 0.7
        description: "å–å‡ºé‡å æ¯”è¶…è¿‡70%"
    
    kline_fields:
      volume: "volume"
      price_change: "(close - open) / open"
      sell_volume_ratio: "1 - (buy_volume / total_volume)"  # ä¼°ç®—
      avg_volume_24h: "avg(volume, 24h)"
    
    onchain_fields:
      volume: "total_volume"
      price_change: "(price - prev_price) / prev_price"
      sell_volume_ratio: "sell_volume / total_volume"
      avg_volume_24h: "avg(total_volume, 24h)"
    
    message_template: |
      âš ï¸ **å¤©é‡è§é¡¶è­¦å‘Š**
      
      Token: {{ symbol }}
      ä»·æ ¼: ${{ price | round(8) }}
      è·Œå¹…: {{ price_change_pct | round(2) }}%
      æˆäº¤é‡: {{ volume | format_number }}
      å–å‡ºå æ¯”: {{ sell_volume_ratio_pct | round(2) }}%
      
      ğŸ’¡ å»ºè®®: æ³¨æ„é£é™©ï¼Œå¯èƒ½è§é¡¶

# å…¨å±€å˜é‡å®šä¹‰
variables:
  volume_mult: 1.5  # é»˜è®¤æˆäº¤é‡å€æ•°
  price_change_threshold: 0.05  # ä»·æ ¼å˜åŒ–é˜ˆå€¼ï¼ˆ5%ï¼‰
  whale_threshold: 10000  # å¤§æˆ·é˜ˆå€¼ï¼ˆUSDTï¼‰

